function human_readable { |x|
   Case(x)
   .when({|x| x > 1000 ** 3}, { "%.3fG" % [x / 1000.0 ** 3] })
   .when({|x| x > 1000 ** 2}, { "%.3fM" % [x / 1000.0 ** 2] })
   .when({|x| x > 1000 ** 1}, { "%.3fk" % [x / 1000.0 ** 1] })
   .else({ x })
 }

